div.modal-header
  h2.pull-left(ng-bind="'lisaa-opetussuunnitelma' | kaanna")
  .pull-right
    +kielivalitsin
  .clearfix

div.modal-body
  div.content-spacing.tutkintohaku
    .form-group.has-feedback.has-feedback-left
      input.form-control(
        type="text"
        placeholder="{{ 'hae-peruste' | kaanna }}"
        ng-model="input"
        ng-model-options="{ debounce: 200 }"
        ng-change="update(input)")
      i.form-control-feedback.glyphicon.glyphicon-search(style="color: gray;")

    div.listaus(ng-show="input.length > 0")
      div.tutkinto(ng-show="perusteet.length > 0" ng-repeat="peruste in perusteet" ng-click="valitsePeruste(peruste)")
        div.nimi(ng-bind="peruste.nimi | kaanna")
        div.diaari(ng-bind="peruste.diaarinumero")
      div(ng-show="perusteet.length === 0")
        span.ei-tuloksia(ng-bind="'ei-hakutuloksia' | kaanna")

    div.peruste(ng-show="peruste")
      div
        h4(ng-bind="'tutkinto' | kaanna")
        span.content.tutkinto-nimi(ng-bind="peruste.nimi | kaanna")
        span=" ("
        span.tutkinto-diaari(ng-bind="peruste.diaarinumero")
        span=")"
      div
        span.content(ng-bind="'voimassa-olo-alkoi' | kaanna")
        span=": "
        span(ng-bind="peruste.voimassaoloAlkaa | aikaleima:'date'")
      div(ng-if="peruste.voimassaoloLoppuu")
        span(ng-bind="'voimassa-olo-paattyy' | kaanna")
        span=": "
        span(ng-bind="peruste.voimassaoloLoppuu | aikaleima:'date'")

      div
        h4(ng-bind="'koulutukset' | kaanna")
        div.content(ng-repeat="koulutus in peruste.koulutukset")
          span(ng-bind="koulutus.nimi | kaanna")
          span=" ("
          span(ng-bind="koulutus.koulutuskoodiArvo")
          span=")"

        toggler.pull-next-to(yes="enemman" no="vahemman" ng-model="$$perusteNaytaLisaa")

        div(ng-show="$$perusteNaytaLisaa")
          div(ng-if="peruste.osaamisalat.length > 0")
            h4(ng-bind="'osaamisalat' | kaanna")
            p.content(ng-repeat="osaamisala in peruste.osaamisalat"
              ng-bind="osaamisala.nimi | kaanna")

          h4(ng-bind="'kuvaus' | kaanna")
          p.content(ng-bind="peruste.kuvaus | kaanna")

  .content-spacing(ng-show="peruste")
    h3(ng-bind="'anna-nimi' | kaanna")
    input.form-control(slocalized ng-model="ops.nimi" type="text" required="true")


div.modal-footer
  button.btn.btn-default(ng-click="peruuta()", ng-bind="'peruuta' | kaanna")
  button.btn.btn-primary(ng-click="ok(ops)", ng-bind="'tallenna' | kaanna")

